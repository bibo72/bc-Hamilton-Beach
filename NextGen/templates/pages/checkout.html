{{#partial "head"}}
    {{{ checkout.checkout_head }}}
    {{{ stylesheet '/assets/css/optimized-checkout.css' }}}
    {{ getFontsCollection }}

    <script type="text/javascript">
        window.language = {{{langJson 'optimized_checkout'}}};
    </script>

    {{{head.scripts}}}
{{/partial}}

{{#partial "page"}}

    <header class="checkoutHeader optimizedCheckout-header">
        <div class="checkoutHeader-content">
            <h1 class="is-srOnly">{{lang 'checkout.title'}}</h1>
            <div class="checkoutHeader-content-inner">
                <h2 class="checkoutHeader-heading">
                    <a class="checkoutHeader-link" href="{{urls.home}}">
                        {{#if checkout.header_image}}
                            <img alt="{{settings.store_logo.title}}" class="checkoutHeader-logo" id="logoImage" src="{{getImage settings.store_logo.image 'logo_size'}}"/>
                        {{ else }}
                            <span class="header-logo-text">{{settings.store_logo.title}}</span>
                        {{/if}}
                    </a>
                </h2>
                {{#if settings.phone_number}}
                    <div class="checkoutHeader-contact">
                        <span>Need Help?</span> <span>Call us <a href="tel:{{settings.phone_number}}">{{settings.phone_number}}</a></span>
                    </div>
                {{/if}}
            </div>
        </div>
    </header>

    {{{ checkout.checkout_content }}}

<!-- header logo scroll -->
<script>
    window.onscroll = function() {
        const scrollTop = window.scrollY;
        if(scrollTop > 0) {
            document.body.classList.add('scroll-fixed');
        } else {
            document.body.classList.remove('scroll-fixed');
        }
    }
</script>

 <!-- rename Free Shipping -->
<script>
    function renameFreeShipping() {
        var shippingOptionDesc = document.querySelectorAll('.shippingOption-desc');
        if (shippingOptionDesc.length) {
            shippingOptionDesc.forEach(function(desc) {
                const text = desc.innerText;
                if (text === 'Free Shipping') {
                    desc.innerText = 'Free Shipping (UPSÂ® Ground)';
                }
            });
        }
    }
    setInterval(renameFreeShipping, 500);
</script>

<!-- Address: set default value of Country to "US" -->
<script>
    (function () {
        if (typeof window.CustomEvent === "function") return false;

        function CustomEvent(event, params) {
            params = params || {
                bubbles: false,
                cancelable: false,
                detail: undefined,
            };
            var evt = document.createEvent("CustomEvent");
            evt.initCustomEvent(
                event,
                params.bubbles,
                params.cancelable,
                params.detail
            );
            return evt;
        }

        CustomEvent.prototype = window.Event.prototype;

        window.CustomEvent = CustomEvent;
    })();
    function setValue() {
        var countrySelect = document.getElementById("countryCodeInput");
        if (!countrySelect) return;

        var nativeSelectValueSetter = Object.getOwnPropertyDescriptor(
            window.HTMLSelectElement.prototype,
            "value"
        ).set;
        nativeSelectValueSetter.call(countrySelect, 'US');
        if (typeof window.CustomEvent === "function") {
            var evt = new CustomEvent("change", { bubbles: true });
        } else {
            var evt = new CustomEvent("change", { bubbles: true });
        }
        countrySelect.dispatchEvent(evt);
    }
    setInterval(setValue, 1000);
</script>

{{/partial}}

{{> layout/checkout}}

